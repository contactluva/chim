<!doctype html>
<html lang="vi">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Auto Open in Browser</title>
  <style>
    body{font-family:system-ui,-apple-system,Segoe UI,Roboto,Arial;margin:0;padding:40px;background:#f6f7fb;color:#111;text-align:center}
    .msg{max-width:600px;margin:0 auto;padding:20px;background:#fff;border-radius:12px;box-shadow:0 6px 24px rgba(20,20,40,.06)}
    h1{font-size:20px;margin-bottom:10px}
    p{color:#444}
  </style>
</head>
<body>
  <div class="msg">
    <h1>Đang cố mở link trong trình duyệt...</h1>
    <p id="status">Vui lòng chờ...</p>
  </div>

  <script>
    const TARGET_URL = 'https://example.com/some/path?a=1';
    const ua = navigator.userAgent || navigator.vendor || window.opera;
    const isAndroid = /Android/.test(ua);
    const isIOS = /iPhone|iPad|iPod/.test(ua);

    function openInNewTab(url){
      window.open(url, '_blank', 'noopener');
      document.getElementById('status').textContent = 'Nếu không thấy tab mới, hãy mở thủ công: ' + url;
    }

    if(isAndroid){
      try{
        const u = new URL(TARGET_URL);
        const intent = `intent://${u.host}${u.pathname}${u.search}#Intent;scheme=https;package=com.android.chrome;S.browser_fallback_url=${encodeURIComponent(TARGET_URL)};end`;
        openInNewTab(intent);
      }catch(e){
        openInNewTab(TARGET_URL);
      }
    }else if(isIOS){
      const chromeScheme = TARGET_URL.replace(/^https?:\/\//,'googlechrome://');
      openInNewTab(chromeScheme);
    }else{
      openInNewTab(TARGET_URL);
    }
  </script>
</body>
</html>
